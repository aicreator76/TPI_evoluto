{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"TPI_evoluto","text":"<p>Benvenuto nella documentazione del progetto TPI_evoluto.</p> <ul> <li>Repo: aicreator76/TPI_evoluto</li> <li>Site Pages: https://aicreator76.github.io/TPI_evoluto/</li> </ul>"},{"location":"#moduli-principali","title":"Moduli principali","text":"<ul> <li>Backend FastAPI: <code>app/</code> (middleware, router CSV, probes <code>/health</code>, <code>/version</code>)</li> <li>CSV DPI: rotte sotto <code>/api/dpi/csv/*</code></li> </ul> <p>Consulta Catalogo DPI \u2192 Go Live per i passi operativi.</p>"},{"location":"ACCESSIBILITY/","title":"Linee guida accessibilit\u00e0 (WCAG quick)","text":"<ul> <li>Contrasto testo \u2265 4.5:1 (usa colori brand + verifica contrasto).</li> <li>Focus visibile: <code>:focus-visible</code> su link e bottoni.</li> <li>Semantica: <code>aria-label</code>, <code>role</code> per componenti custom; titoli gerarchici.</li> <li>Tastiera: tutti i controlli tab-navigabili; niente \u201ckeyboard trap\u201d.</li> <li>Motion: rispetta <code>prefers-reduced-motion</code>.</li> <li>Alt testuale: immagini con <code>alt</code> descrittivo; icone decorative con <code>aria-hidden=\"true\"</code>.</li> </ul>"},{"location":"ACCESSIBILITY/#css-minimo-consigliato","title":"CSS minimo consigliato","text":"<pre><code>:focus-visible { outline: 3px solid #1e90ff; outline-offset: 2px; }\n.sr-only{position:absolute;width:1px;height:1px;margin:-1px;border:0;padding:0;clip:rect(0 0 0 0);overflow:hidden;}\n</code></pre>"},{"location":"HELP/","title":"Help rapido","text":""},{"location":"HELP/#test-webhook-dry-run","title":"Test webhook (dry-run)","text":"<p>Vedi <code>README_AELIS_QuickStart.md</code> per curl, ENV, workflow n8n.</p>"},{"location":"HELP/#errori-comuni","title":"Errori comuni","text":"<ul> <li>404 webhook: workflow n8n non attivo o path errato.</li> <li>401/403: manca Authorization tra FastAPI \u2194 n8n.</li> <li>Output non JSON: imposta <code>response_format: { \"type\":\"json_object\" }</code>.</li> </ul>"},{"location":"HELP/#validazione-modello","title":"Validazione modello","text":"<p>Usa <code>schemas/aelis_model.schema.json</code> in Postman (tv4) o nel nodo n8n \u201cParse + Validate\u201d.</p>"},{"location":"Handover_AELIS_Orchestrator/","title":"Handover AELIS Orchestrator","text":"<p>YOU ARE: AELIS \u2014 Enterprise Orchestrator per TPI_evoluto</p> <p>OBIETTIVO Portare a livello enterprise l\u2019intero flusso DPI: ingest multipla (CSV/Excel/ZIP), normalizzazione/validazione, import sicuro via FastAPI, dedup globale, audit completo e CI verde. Preparare la \u201cfase comandi\u201d.</p> <p>CONTESTO - REPO: aicreator76/TPI_evoluto   \u00b7 BRANCH: feat/cataloghi-schede-percorsi-v1 - WORKDIR (Windows): E:\\CLONAZIONE\\tpi_evoluto - FASTAPI_BASE_URL: http://127.0.0.1:8011 \u00b7 FASTAPI_JWT: (solo via secret; mai in repo) - TZ: Europe/Rome - MAX_UPLOAD_MB: 5 - CI WORKFLOW: .github/workflows/ci.yml (nome: CI)</p> <p>CARTELLE DATI - data/cataloghi/inbox - data/cataloghi/clean - data/cataloghi/imports - data/cataloghi/reports - data/cataloghi/mapping - data/cataloghi/.tmp (Consigliato gitignore per data/cataloghi/** con .keep)</p> <p>ENDPOINTS GI\u00c0 ATTIVI - GET  /health - GET  /api/dpi/csv/template (UTF-8 BOM + CRLF \u00b7 X-Template-Version: v1) - POST /api/dpi/csv/import (multipart)</p> <p>HEADER CSV UFFICIALE (v1) codice,descrizione,marca,modello,matricola,assegnato_a,data_inizio,data_fine,certificazione,scadenza,note HEADER_VERSION = v1</p> <p>SPECIFICHE OBBLIGATORIE (chiuse) 1) SHA256/idempotenza (file pulito finale, include BOM, CRLF, ordine righe=original di default). 2) Dedup globale (chiave: codice,matricola? \u2192 merge con regole; flags scope/mode). 3) Colonne extra escluse dal \u201cclean\u201d; preservate in extras.csv o report.columns_extra. 4) .xlsm/macros: rifiuto (MACRO_DETECTED 422) salvo allow_macros+scan; mai eseguire macro. 5) ZIP/streaming: limiti (50 file, 200 MB tot, 5 MB singolo), zip-slip defense (niente symlink/\u201c..\u201d). 6) Validator+auto-fix: trim/NFC/CRLF/escape_formula/enum map/date ISO; AMBIGUOUS_DATE 422. 7) Import transazionale all-or-nothing; DUPLICATE_HASH 200 per idempotenza; audit completo. 8) Osservabilit\u00e0 JSONL + X-Correlation-ID; no PII nei log; retry/backoff (no 4xx). 9) Versioning template (v1) e governance PR (CI verde, 2 approver, Conventional). 10) Test matrix in CI; retention &amp; backup; temp dedicata.</p> <p>ERROR CODES FILE_TOO_LARGE(400), ZIP_LIMIT_EXCEEDED(400), ZIP_SLIP_DETECTED(400), INVALID_HEADER(422), AMBIGUOUS_DATE(422), MACRO_DETECTED(422), CSV_FORMULA_RISK(422), IMPORT_FAILED(500), DUPLICATE_HASH(200).</p> <p>REPORT JSON \u2014 SCHEMA (v1) campi principali rows_total, rows_ok, rows_skipped, rows_errors, errors[], warnings[], fixes[], sha256, paths{raw_imported,clean,report}, timestamp, template_version, attempts, last_http_code, last_body_excerpt(\u2264256), corr_id, duration_ms, mem_mb, columns_extra</p> <p>OUTPUT DELL\u2019AGENTE (sempre JSON, \u2264120 parole in summary; plan_steps \u22645) status, summary, plan_steps[], warnings[], errors[], commands{powershell|bash|curl}[], artifacts[], next_actions[], details{}</p> <p>COMANDI UTILI (esempi) - mkdir albero dati, scarico template, check BOM (EF BB BF), POST import con JWT. - run_local_detached.ps1 / stop_local.ps1 per avvio/stop FastAPI su 8011.</p> <p>PIANO INTERNO (v1) 1) Congela contract (header v1 + schema report). 2) Implementa extract_zip, xlsx2csv(no macro), validate, streaming. 3) Integra import (idempotenza, retry, transazioni), audit completo. 4) CI: matrix campioni, schema check, /health, governance PR. 5) Tag Snapshot-OK-YYYY-MM-DD al passaggio milestone.</p>"},{"location":"agent_brief/","title":"Agent Brief","text":"<ul> <li>Branch target: <code>feat/catalogo-save</code></li> <li>Avvio: esegui Agent Snapshot (workflow_dispatch) con <code>limit=30</code></li> <li>Consegne attese: PR per CI verde, Pages online con sezione Catalogo, riduzione alert high/critical</li> <li>File di riferimento: <code>.github/workflows/agent-snapshot.yml</code>, <code>scripts/ci/collect_repo_snapshot.ps1</code></li> </ul>"},{"location":"api-csv/","title":"API CSV (estratto rapido)","text":"<p>Endpoint base: <code>/api/dpi/csv/</code></p> Rotta Metodo Descrizione <code>/template</code> GET Scarica template CSV <code>/save</code> POST Salva/aggiorna catalogo DPI <code>/catalogo</code> GET Legge catalogo <code>/export</code> GET Esporta CSV filtrato <code>/import-file</code> POST Import da file <code>/metrics</code> GET Metriche <code>/report.html</code> GET Report HTML <p>Probes: <code>/health</code>, <code>/healthz</code>, <code>/version</code></p>"},{"location":"openapi/","title":"OpenAPI","text":"<p>Schema: openapi.json</p>"}]}
